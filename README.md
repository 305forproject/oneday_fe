# oneday_fe

React í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸ - Docker & Nginx ê¸°ë°˜ ë°°í¬

---

## ğŸ“¦ ê¸°ìˆ  ìŠ¤íƒ

- **React** - UI ë¼ì´ë¸ŒëŸ¬ë¦¬
- **Vite** - ë¹Œë“œ ë„êµ¬
- **React Router** - í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë¼ìš°íŒ…
- **Axios** - HTTP í´ë¼ì´ì–¸íŠ¸
- **Docker** - ì»¨í…Œì´ë„ˆí™”
- **Nginx** - ì›¹ ì„œë²„

---

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1. ë¡œì»¬ ê°œë°œ í™˜ê²½

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ê°œë°œ ì„œë²„ ì‹¤í–‰ (http://localhost:5173)
npm run dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build

# ë¹Œë“œ ê²°ê³¼ ë¯¸ë¦¬ë³´ê¸°
npm run preview
```

### 2. Dockerë¡œ ì‹¤í–‰í•˜ê¸°

#### Docker Compose ì‚¬ìš© (ê¶Œì¥)

```bash
# ë¹Œë“œ ë° ì‹¤í–‰
docker-compose up --build

# ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f

# ì¤‘ì§€
docker-compose down
```

#### Docker ë‹¨ë… ì‚¬ìš©

```bash
# ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t oneday-frontend .

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker run -p 5173:80 oneday-frontend
```

#### ì ‘ì†

- **í”„ë¡ íŠ¸ì—”ë“œ**: http://localhost:5173

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
oneday_fe/
â”œâ”€â”€ src/                  # ì†ŒìŠ¤ ì½”ë“œ
â”‚   â”œâ”€â”€ assets/          # ì •ì  íŒŒì¼ (ì´ë¯¸ì§€, ì•„ì´ì½˜ ë“±)
â”‚   â”œâ”€â”€ App.jsx          # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ main.jsx         # ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
â”œâ”€â”€ public/              # ê³µê°œ ì •ì  íŒŒì¼
â”œâ”€â”€ Dockerfile           # Docker ì´ë¯¸ì§€ ë¹Œë“œ ì„¤ì •
â”œâ”€â”€ docker-compose.yml   # Docker Compose ì„¤ì •
â”œâ”€â”€ nginx.conf           # Nginx ì›¹ ì„œë²„ ì„¤ì •
â””â”€â”€ .dockerignore        # Docker ë¹Œë“œ ì œì™¸ íŒŒì¼
```

---

## ğŸ”§ ì£¼ìš” ì„¤ì •

### Docker Multi-stage Build

í”„ë¡œì íŠ¸ëŠ” **Multi-stage build**ë¥¼ ì‚¬ìš©í•˜ì—¬ ìµœì í™”ëœ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:

1. **ë¹Œë“œ ìŠ¤í…Œì´ì§€**: Node.js í™˜ê²½ì—ì„œ React ì•± ë¹Œë“œ
2. **ì‹¤í–‰ ìŠ¤í…Œì´ì§€**: Nginxë¡œ ì •ì  íŒŒì¼ ì„œë¹™

**ì´ë¯¸ì§€ í¬ê¸°**: ì•½ 30-50MB (ì¼ë°˜ ë¹Œë“œ ëŒ€ë¹„ 95% ê°ì†Œ)

### Nginx ì„¤ì •

- âœ… **React Router SPA ì§€ì›** - ëª¨ë“  ë¼ìš°íŠ¸ë¥¼ `index.html`ë¡œ í´ë°±
- âœ… **Gzip ì••ì¶•** - JS/CSS íŒŒì¼ í¬ê¸° ê°ì†Œ
- âœ… **ì •ì  íŒŒì¼ ìºì‹±** - ë¸Œë¼ìš°ì € ìºì‹œ ìµœì í™” (1ë…„)
- âœ… **ë³´ì•ˆ í—¤ë”** - XSS, í´ë¦­ì¬í‚¹ ë°©ì§€

### API ì—°ë™ (ì¤€ë¹„ë¨)

ë°±ì—”ë“œ API ì—°ë™ì´ í•„ìš”í•œ ê²½ìš° `nginx.conf`ì˜ ì£¼ì„ì„ í•´ì œí•˜ì„¸ìš”:

```nginx
location /api {
    proxy_pass http://host.docker.internal:8080;
    # ... ì„¤ì •
}
```

---

## ğŸ› ï¸ ê°œë°œ ê°€ì´ë“œ

### í™˜ê²½ ë³€ìˆ˜

`.env` íŒŒì¼ì„ ìƒì„±í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```env
VITE_API_BASE_URL=/api
```

### ë¹Œë“œ ìµœì í™”

- **ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…**: Viteê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬
- **ì´ë¯¸ì§€ ìµœì í™”**: `public/` í´ë”ì˜ ì´ë¯¸ì§€ëŠ” ë¹Œë“œì‹œ ë³µì‚¬ë¨
- **CSS ìµœì í™”**: ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” CSS ìë™ ì œê±°

---

## ğŸ“ ì°¸ê³ ì‚¬í•­

### Node.js ë²„ì „

- **ê¶Œì¥ ë²„ì „**: 23.9.0
- **ìµœì†Œ ë²„ì „**: 18.x

### í¬íŠ¸ ë³€ê²½

`docker-compose.yml`ì—ì„œ í¬íŠ¸ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```yaml
ports:
  - "ì›í•˜ëŠ”í¬íŠ¸:80"  # ì˜ˆ: "3000:80"
```

### ë°±ì—”ë“œ ì—°ë™

ë°±ì—”ë“œ ì„œë²„ê°€ ì¤€ë¹„ë˜ë©´:

1. `nginx.conf`ì˜ `/api` í”„ë¡ì‹œ ì„¤ì • ì£¼ì„ í•´ì œ
2. `proxy_pass` ì£¼ì†Œë¥¼ ë°±ì—”ë“œ ì£¼ì†Œë¡œ ë³€ê²½
3. ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘: `docker-compose restart`

---

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### React Router 404 ì—ëŸ¬

Nginxì˜ `try_files` ì„¤ì •ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•˜ì„¸ìš”:

```nginx
location / {
    try_files $uri $uri/ /index.html;
}
```

### ë°±ì—”ë“œ ì—°ê²° ì‹¤íŒ¨

Docker ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ í˜¸ìŠ¤íŠ¸ ë¨¸ì‹  ì ‘ê·¼:

```nginx
# Mac/Windows
proxy_pass http://host.docker.internal:8080;

# Linux - docker-compose.ymlì— ì¶”ê°€ í•„ìš”
# extra_hosts:
#   - "host.docker.internal:host-gateway"
```

### ë¹Œë“œ ì—ëŸ¬

ìºì‹œ ì‚­ì œ í›„ ì¬ë¹Œë“œ:

```bash
docker-compose down
docker system prune -a
docker-compose up --build
```